package zhiyuan.com.loan.util;import android.app.ActivityManager;import android.app.ActivityManager.RunningAppProcessInfo;import android.app.ProgressDialog;import android.content.ClipboardManager;import android.content.Context;import android.net.ConnectivityManager;import android.net.NetworkInfo;import android.text.TextUtils;import android.util.DisplayMetrics;import android.util.TypedValue;import android.view.WindowManager;import android.widget.Toast;import com.google.gson.Gson;import java.io.Closeable;import java.io.IOException;import java.util.List;import zhiyuan.com.loan.bean.Apk;public class MyUtils {    private static ProgressDialog dialog;    public static String getProcessName(Context cxt, int pid) {        ActivityManager am = (ActivityManager) cxt                .getSystemService(Context.ACTIVITY_SERVICE);        List<RunningAppProcessInfo> runningApps = am.getRunningAppProcesses();        if (runningApps == null) {            return null;        }        for (RunningAppProcessInfo procInfo : runningApps) {            if (procInfo.pid == pid) {                return procInfo.processName;            }        }        return null;    }    public static void close(Closeable closeable) {        try {            if (closeable != null) {                closeable.close();            }        } catch (IOException e) {            e.printStackTrace();        }    }    public static DisplayMetrics getScreenMetrics(Context context) {        WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);        DisplayMetrics dm = new DisplayMetrics();        wm.getDefaultDisplay().getMetrics(dm);        return dm;    }    public static float dp2px(Context context, float dp) {        return TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp,                context.getResources().getDisplayMetrics());    }    public static boolean isWifi(Context context) {        ConnectivityManager connectivityManager = (ConnectivityManager) context                .getSystemService(Context.CONNECTIVITY_SERVICE);        NetworkInfo activeNetInfo = connectivityManager.getActiveNetworkInfo();        if (activeNetInfo != null && activeNetInfo.getType() == ConnectivityManager.TYPE_WIFI) {            return true;        }        return false;    }    public static void executeInThread(Runnable runnable) {        new Thread(runnable).start();    }    public static void showDialog(String message,Context context){        try {            if (dialog == null) {                dialog = new ProgressDialog(context);                dialog.setCancelable(true);            }            dialog.setMessage(message);            dialog.show();        } catch (Exception e) {            // 在其他线程调用dialog会报错        }    }    public static void hideDialog() {        if (dialog != null && dialog.isShowing())            try {                dialog.dismiss();            } catch (Exception e) {            }    }    public static void putApkToSP(Apk apk){        Gson gson = new Gson();        String apkJson = gson.toJson(apk);        SharedPreferencesUtil.putStringValueFromSP("apkJson",apkJson);    }    public static Apk getApkFromSP(){        Gson gson = new Gson();        String apkJson = SharedPreferencesUtil.getStringValueFromSP("apkJson");        if (!TextUtils.isEmpty(apkJson)){            return gson.fromJson(apkJson, Apk.class);        }        return null;    }    private static Toast mToast;    public static void showToask(Context context ,String text){        if (context!=null){            if (mToast!=null){                mToast.cancel();            }            mToast = Toast.makeText(context, text, Toast.LENGTH_SHORT);            mToast.show();        }    }    //复制文字    public static void copyText(String text,Context context) {        // 得到剪贴板管理器        ClipboardManager cmb = (ClipboardManager)context.getSystemService(Context.CLIPBOARD_SERVICE);        cmb.setText(text);    }}
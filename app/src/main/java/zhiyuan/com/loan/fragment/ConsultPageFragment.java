package zhiyuan.com.loan.fragment;import android.content.Intent;import android.graphics.Color;import android.os.Bundle;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentManager;import android.support.v4.app.FragmentTransaction;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.LinearLayout;import android.widget.TextView;import zhiyuan.com.loan.R;/** * Created by Administrator on 2016/7/7. */public class ConsultPageFragment extends Fragment {    private static String TAG = "ConsultPageFragment";    private View inflate = null;    private TextView tv_consult_msg;    private TextView tv_consult_advise;    @Nullable    @Override    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        if (inflate==null){            inflate = inflater.inflate(R.layout.frgament_page_consult, new LinearLayout(getActivity()),false);            Log.i(TAG,"onCreateView:");        }        initView();        return inflate;    }    private void initView() {        tv_consult_msg = (TextView) inflate.findViewById(R.id.tv_consult_msg);        tv_consult_advise = (TextView) inflate.findViewById(R.id.tv_consult_advise);        MySwitchListener mySwitchListener = new MySwitchListener();        tv_consult_msg.setOnClickListener(mySwitchListener);        tv_consult_advise.setOnClickListener(mySwitchListener);    }    class  MySwitchListener implements View.OnClickListener{        @Override        public void onClick(View v) {            switch (v.getId()){                case R.id.tv_consult_msg:                    switchState(0);                    break;                case R.id.tv_consult_advise:                    switchState(1);                    break;            }        }    }    public void switchState(int state){        //getFragmentManager到的是activity对所包含fragment的Manager，        // 而如果是fragment嵌套fragment，那么就需要利用getChildFragmentManager()了。        FragmentManager fragmentManager = getChildFragmentManager();        FragmentTransaction fragmentTransaction =  fragmentManager.beginTransaction();        MessageFragment messageFragment = (MessageFragment) fragmentManager.findFragmentById(R.id.fg_consult_msg);        AdvisersManFragment advisersManFragment = (AdvisersManFragment) fragmentManager.findFragmentById(R.id.fg_consult_advise);        switch (state){            case 0:                tv_consult_msg.setTextColor(Color.parseColor("#FFFFFF"));                tv_consult_msg.setBackgroundResource(R.drawable.bg_care_switch_lefton);                tv_consult_advise.setTextColor(Color.parseColor("#000000"));                tv_consult_advise.setBackgroundResource(R.drawable.bg_care_switch_rightoff);                fragmentTransaction.hide(advisersManFragment);                fragmentTransaction.show(messageFragment);                fragmentTransaction.commit();                break;            case 1:                tv_consult_msg.setTextColor(Color.parseColor("#000000"));                tv_consult_msg.setBackgroundResource(R.drawable.bg_care_switch_leftoff);                tv_consult_advise.setTextColor(Color.parseColor("#FFFFFF"));                tv_consult_advise.setBackgroundResource(R.drawable.bg_care_switch_righton);                fragmentTransaction.hide(messageFragment);                fragmentTransaction.show(advisersManFragment);                fragmentTransaction.commit();                break;            default:                break;        }    }    @Override    public void onActivityResult(int requestCode, int resultCode, Intent data) {        //super.onActivityResult(requestCode, resultCode, data);        Log.i("onActivityResult","ConsultPageFragment"+requestCode+","+resultCode);        MessageFragment messageFragment = new MessageFragment();        messageFragment.onActivityResult(requestCode, resultCode, data);    }}